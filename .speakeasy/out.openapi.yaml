openapi: "3.1.0"
info:
  title: "Linkage API"
  description: "This file has been autogenerated, check out the docs to see how to customize these options"
  version: "0.1.0"
paths:
  "/api/v1/create":
    post:
      summary: "Create a workflow"
      description: "Creates a workflow for a project with the provided nodes and edges."
      parameters:
        - name: "x-app-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-app-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "201":
          description: "Creates a workflow for a project with the provided nodes and edges."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "workflow":
                    description: "Unknown type"
                  "nodes":
                    description: "Unknown type"
                  "edges":
                    description: "Unknown type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Missing required headers"
                          - "Workflow must have at least one node and one edge"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Project not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "HTTP 500 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Failed to create workflow"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "workflows"
      x-speakeasy-name-override: "create"
  "/api/v1/features":
    get:
      summary: "Get project features"
      description: "Returns enabled feature flags for the project, including billing-gated features."
      parameters:
        - name: "x-client-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Returns enabled feature flags for the project, including billing-gated features."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "features":
                    type: "object"
                    properties:
                      "controlBlocks": {}
                      "realtimeCollaboration":
                        description: "Circular type"
        "401":
          description: "HTTP 401 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Requires valid client id and client secret"
                          - "Invalid client id or secret"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "HTTP 500 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Project has an invalid configuration"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "features"
      x-speakeasy-name-override: "get"
  "/api/v1/node-overlays":
    get:
      summary: "Get node overlays"
      description: "Returns node overlay metadata configured for a project."
      parameters:
        - name: "x-client-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Returns node overlay metadata configured for a project."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "overlays": {}
        "401":
          description: "Returns node overlay metadata configured for a project."
          content:
            "application/json": {}
      x-speakeasy-group: "nodeOverlays"
      x-speakeasy-name-override: "get"
  "/api/v1/node-types":
    get:
      summary: "Get node types"
      description: "Returns the available node types for the project, optionally narrowed by schema version."
      parameters:
        - name: "x-client-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-schema-version"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Returns the available node types for the project, optionally narrowed by schema version."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "version": {}
                  "versions":
                    description: "Unknown type"
                  "nodes":
                    description: "Unknown type"
        "401":
          description: "HTTP 401 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Requires valid client id and client secret"
                          - "Invalid client id or secret"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Schema version not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "HTTP 500 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Project has an invalid configuration"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "nodeTypes"
      x-speakeasy-name-override: "get"
  "/api/v1/runs":
    get:
      summary: "List workflow runs"
      description: "Returns recent runs for a workflow, with optional pagination."
      parameters:
        - name: "workflowId"
          schema:
            type: "string"
          in: "query"
          required: false
        - name: "limit"
          schema:
            type: "string"
          in: "query"
          required: false
      responses:
        "200":
          description: "Returns recent runs for a workflow, with optional pagination."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "runs": {}
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "workflowId is required"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "runs"
      x-speakeasy-name-override: "list"
    post:
      summary: "Create a workflow run"
      description: "Creates a new run for the specified workflow and returns the run metadata."
      responses:
        "200":
          description: "Creates a new run for the specified workflow and returns the run metadata."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "runId": {}
                  "workflowId":
                    description: "Circular type"
                  "status":
                    description: "Circular type"
                  "nodeStatuses":
                    description: "Circular type"
                  "startedAt":
                    description: "Circular type"
                  "finishedAt":
                    description: "Circular type"
                  "metadata":
                    description: "Circular type"
                  "lastEventId":
                    description: "Circular type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Invalid run payload"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "HTTP 500 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Failed to create run"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "runs"
      x-speakeasy-name-override: "create"
  "/api/v1/state":
    options:
      summary: "Preflight workflow state requests"
      description: "Returns CORS headers for workflow state GET/POST requests."
      responses:
        "204":
          description: "Returns CORS headers for workflow state GET/POST requests."
          content:
            "application/json": {}
      x-speakeasy-group: "state"
      x-speakeasy-name-override: "options"
    get:
      summary: "Get workflow state"
      description: "Fetches workflow nodes/edges and hashes for a workflow."
      parameters:
        - name: "workflowId"
          schema:
            type: "string"
          in: "query"
          required: false
        - name: "x-app-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-app-secret"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-app-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Fetches workflow nodes/edges and hashes for a workflow."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "nodes": {}
                  "edges":
                    description: "Circular type"
                  "nodesById":
                    description: "Circular type"
                  "edgesById":
                    description: "Circular type"
                  "nodesHash":
                    type: "string"
                  "edgesHash":
                    description: "Circular type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Missing app id, app secret, or workflow id"
                          - "Missing workflow client secret"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Bad Configuration"
                          - "Workflow not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "state"
      x-speakeasy-name-override: "get"
    post:
      summary: "Update workflow state"
      description: "Persists workflow nodes/edges when the payload hash changes."
      parameters:
        - name: "x-app-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-app-secret"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-app-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Persists workflow nodes/edges when the payload hash changes."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "nodesHash":
                    type: "string"
                  "edgesHash":
                    type: "string"
                  "updated":
                    type: "object"
                    properties:
                      "nodes":
                        type: "boolean"
                      "edges":
                        type: "boolean"
        "204":
          description: "Persists workflow nodes/edges when the payload hash changes."
          content:
            "application/json": {}
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Missing preliminary config"
                          - "Missing workflow client secret"
                          - "Incorrect workflow client secret"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Bad Configuration"
                          - "Workflow not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "state"
      x-speakeasy-name-override: "update"
  "/api/v1/x":
    post:
      summary: "Execute a workflow run"
      description: "Validates client credentials and schema version, persists execution state, forwards the payload to the deployed app, and returns the execution id."
      parameters:
        - name: "x-client-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-schema-version"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "Authorization"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Validates client credentials and schema version, persists execution state, forwards the payload to the deployed app, and returns the execution id."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "executionId":
                    description: "Unknown type"
        "401":
          description: "HTTP 401 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Requires valid client id, client secret, and schema version"
                          - "Invalid client id or secret"
                          - "Unauthenticated"
                          - "Unauthorized"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "429":
          description: "HTTP 429 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Usage limit exceeded"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "HTTP 500 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Project has an invalid configuration"
                          - "Project has no deployment for this schema version"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "workflow"
      x-speakeasy-name-override: "execute"
  "/api/v1/runs/{runId}":
    get:
      summary: "Get a workflow run"
      description: "Returns run metadata for the given run id."
      parameters:
        - name: "runId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        "200":
          description: "Returns run metadata for the given run id."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "runId": {}
                  "workflowId":
                    description: "Circular type"
                  "status":
                    description: "Circular type"
                  "nodeStatuses":
                    description: "Circular type"
                  "startedAt":
                    description: "Circular type"
                  "finishedAt":
                    description: "Circular type"
                  "metadata":
                    description: "Circular type"
                  "lastEventId":
                    description: "Circular type"
      x-speakeasy-group: "runs"
      x-speakeasy-name-override: "get"
  "/api/v1/trigger/{triggerId}":
    post:
      summary: "Execute a webhook trigger"
      description: "Validates the webhook trigger and starts a workflow execution."
      parameters:
        - name: "Authorization"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "triggerId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        "200":
          description: "Validates the webhook trigger and starts a workflow execution."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "success":
                    type: "boolean"
                    example: true
                  "executionId":
                    description: "Unknown type"
                  "triggerExecutionId":
                    description: "Unknown type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger ID is required"
                          - "Invalid trigger type for this endpoint"
                          - "Invalid JSON payload"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "401":
          description: "HTTP 401 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Unauthorized"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "403":
          description: "HTTP 403 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger is disabled"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger not found"
                          - "Workflow not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "Validates the webhook trigger and starts a workflow execution."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "string"
                    example: "Internal server error"
                  "details":
                    description: "Unknown type"
      x-speakeasy-group: "trigger"
      x-speakeasy-name-override: "execute"
    get:
      summary: "Get trigger details"
      description: "Returns metadata about a trigger for testing or debugging."
      parameters:
        - name: "triggerId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        "200":
          description: "Returns metadata about a trigger for testing or debugging."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "id":
                    description: "Unknown type"
                  "name":
                    description: "Unknown type"
                  "type":
                    description: "Unknown type"
                  "enabled":
                    description: "Unknown type"
                  "workflowId":
                    description: "Unknown type"
                  "workflowName":
                    description: "Unknown type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger ID is required"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "trigger"
      x-speakeasy-name-override: "getDetails"
  "/api/v1/trigger/manual":
    post:
      summary: "Execute a manual trigger"
      description: "Executes a workflow on-demand using client credentials and an optional payload."
      parameters:
        - name: "x-client-id"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "x-client-secret"
          schema:
            type: "string"
          in: "header"
          required: false
      responses:
        "200":
          description: "Executes a workflow on-demand using client credentials and an optional payload."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "success":
                    type: "boolean"
                    example: true
                  "executionId":
                    description: "Unknown type"
                  "triggerExecutionId":
                    description: "Unknown type"
                  "message":
                    type: "string"
                    example: "Workflow execution started successfully"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Invalid JSON body"
                          - "Trigger ID is required"
                          - "This endpoint only supports manual triggers"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "401":
          description: "HTTP 401 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Client credentials required"
                          - "Unauthorized"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "403":
          description: "HTTP 403 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger is disabled"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "404":
          description: "HTTP 404 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Trigger not found"
                          - "Workflow not found"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
        "500":
          description: "Executes a workflow on-demand using client credentials and an optional payload."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "string"
                    example: "Internal server error"
                  "details":
                    description: "Unknown type"
      x-speakeasy-group: "manualTrigger"
      x-speakeasy-name-override: "execute"
  "/api/v1/runs/{runId}/events":
    get:
      summary: "List or stream run events"
      description: "Returns run events for the given run id, with optional polling cursor or SSE streaming."
      parameters:
        - name: "cursor"
          schema:
            type: "string"
          in: "query"
          required: false
        - name: "limit"
          schema:
            type: "string"
          in: "query"
          required: false
        - name: "stream"
          schema:
            type: "string"
          in: "query"
          required: false
        - name: "accept"
          schema:
            type: "string"
          in: "header"
          required: false
        - name: "runId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        "200":
          description: "Returns run events for the given run id, with optional polling cursor or SSE streaming."
          content:
            "application/json":
              schema:
                description: "Unknown type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Invalid cursor"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "runs"
      x-speakeasy-name-override: "getEvents"
    post:
      summary: "Ingest run events"
      description: "Appends one or more events to the run event stream for the given run id."
      parameters:
        - name: "runId"
          in: "path"
          required: true
          schema:
            type: "string"
      responses:
        "200":
          description: "Appends one or more events to the run event stream for the given run id."
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "accepted":
                    description: "Unknown type"
                  "events":
                    description: "Unknown type"
                  "nextCursor":
                    description: "Unknown type"
        "400":
          description: "HTTP 400 response"
          content:
            "application/json":
              schema:
                type: "object"
                properties:
                  "error":
                    type: "object"
                    properties:
                      "message":
                        type: "string"
                        enum:
                          - "Invalid run events payload"
                          - "Event runId/workflowId mismatch"
                      "details": {}
                    additionalProperties: false
                required:
                  - "error"
      x-speakeasy-group: "runs"
      x-speakeasy-name-override: "ingestEvents"
servers:
  - url: "http://localhost:3000"
